# **System Architecture & Developer Guide**

**–í–µ—Ä—Å–∏—è: 3.0**

## **1\. –û–±–∑–æ—Ä –°–∏—Å—Ç–µ–º—ã –∏ –°—Ç–µ–∫ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–π**

–ù–∞—Å—Ç–æ—è—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –æ–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –æ–±—É—á–µ–Ω–∏—è –∏ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–∫—Ç–æ—Ä–∏–Ω–≥–∞. –î–æ–∫—É–º–µ–Ω—Ç –ø—Ä–∏–∑–≤–∞–Ω —Å–ª—É–∂–∏—Ç—å –µ–¥–∏–Ω—ã–º, –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∏—Ö —Å —Å–∏—Å—Ç–µ–º–æ–π, –æ—Ç –Ω–æ–≤—ã—Ö –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–æ –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ –ø–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ (DevOps), –æ—Ç–≤–µ—á–∞—é—â–∏—Ö –∑–∞ –µ–µ –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å.

### **1.1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –í—ã—Å–æ–∫–æ–≥–æ –£—Ä–æ–≤–Ω—è**

–°–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –±–∞–∑–µ **Flask** –∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω **"–§–∞–±—Ä–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"** (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é create\_app –≤ \_\_init\_\_.py). –°–ª–µ–¥—É–µ—Ç –æ—Å–æ–±–æ –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –±—ã–ª –≤—ã–±—Ä–∞–Ω –≤–≤–∏–¥—É –µ–≥–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –≥–∏–±–∫–æ—Å—Ç–∏. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (lazy initialization) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π, —á—Ç–æ –¥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è production, development –∏–ª–∏ testing) –ø—É—Ç–µ–º –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —Ç–∞–∫–∂–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ (circular imports) –Ω–∞ —É—Ä–æ–≤–Ω–µ Python, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π –≤ –∫—Ä—É–ø–Ω—ã—Ö Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–≥–æ–µ **—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π (Separation of Concerns)** –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, —á—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –≤—ã—Å–æ–∫–æ–π –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ:

* **Flask:** –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É—é—â–µ–µ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å–≤—è–∑—ã–≤–∞—é—â–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.  
* **API (api/routes.py):** –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å (Blueprint), –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—â–∏–π –≤—Å—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É. –û–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–∞–∫ headless-—Å–µ—Ä–≤–∏—Å, –ø—Ä–∏–Ω–∏–º–∞—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ JSON-–∑–∞–ø—Ä–æ—Å—ã, –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–¥–µ–ª–µ–Ω –æ—Ç –ª–æ–≥–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.  
* **Web (web/routes.py):** –û—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å (Blueprint), —á—å—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç—Ä–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—á–µ—Ä–µ–∑ Flask-Login) –∏ –æ—Ç–¥–∞—á–µ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö HTML-–æ–±–æ–ª–æ—á–µ–∫ (—Ö–æ—Å—Ç–æ–≤ –¥–ª—è SPA), —Ç–∞–∫–∏—Ö –∫–∞–∫ results.html.  
* **CLI (commands.py):** –ù–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å Flask-Click) –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, flask db upgrade), —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –æ—Ç–¥–µ–ª–µ–Ω–Ω—ã–π –æ—Ç –≤–µ–±\-–ø—Ä–æ—Ü–µ—Å—Å–∞.

–°–∏—Å—Ç–µ–º–∞ –≤ –ø–æ–ª–Ω–æ–π –º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–º–æ–¥–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è Backend for Frontend (BFF):**

1. –ö–ª–∏–µ–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä) –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –±–∞–∑–æ–≤—É—é HTML-–æ–±–æ–ª–æ—á–∫—É –æ—Ç web/routes.py, –∫–æ—Ç–æ—Ä–∞—è —Å–ª—É–∂–∏—Ç –ª–∏—à—å —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞.  
2. –í–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π –æ–±–æ–ª–æ—á–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π JavaScript (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 117-test.html –∏–ª–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å results.html), –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è –≤—Å—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –ª–æ–≥–∏–∫—É –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.  
3. –î–∞–Ω–Ω—ã–π JS-–∫–æ–¥ –∞–∫—Ç–∏–≤–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –∑–∞—â–∏—â–µ–Ω–Ω—ã–º JSON API (api/routes.py), –æ—Ç–ø—Ä–∞–≤–ª—è—è –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, logEventToServer) –∏ –ø–æ–ª—É—á–∞—è –∏—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.  
4. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, **SocketIO** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏. –ë—ç–∫–µ–Ω–¥ (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ save\_results) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Redis Pub/Sub** –¥–ª—è —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–æ–±—ã—Ç–∏—è update\_needed –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—è–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å *–¥–µ–ª—å—Ç–∞-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ* (delta update) —Å–≤–æ–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏.

### **1.2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫**

–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å—Ç–µ–∫–∞ –∏ –∏—Ö —Ä–æ–ª–∏ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å–∏—Å—Ç–µ–º—ã:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ö–ª—é—á–µ–≤—ã–µ –§–∞–π–ª—ã |
| :---- | :---- | :---- |
| **–§—Ä–µ–π–º–≤–æ—Ä–∫** | Flask, Flask-SocketIO | –õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ–µ —è–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ —Ä–æ—É—Ç–∏–Ω–≥ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤. Flask-SocketIO –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é real-time WebSocket-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –ø–æ–≤–µ—Ä—Ö Flask, –∏—Å–ø–æ–ª—å–∑—É—è –º–æ–¥–µ–ª—å —Å–æ–±—ã—Ç–∏–π. |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | Flask-SQLAlchemy (PostgreSQL) | ORM –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL. –ê–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã, –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Python. –°–ª–µ–¥—É–µ—Ç –æ—Ç–º–µ—Ç–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è PostgreSQL —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ sqlalchemy.dialects.postgresql.insert (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ, –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ON CONFLICT DO UPDATE –≤ get\_or\_create\_user) –∏ –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (with\_for\_update() –≤ document.py). –ü–æ—Å–ª–µ–¥–Ω–µ–µ —è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (data integrity) –≤ —É—Å–ª–æ–≤–∏—è—Ö –≤—ã—Å–æ–∫–∏—Ö –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π" (race conditions) –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. |
| **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –û—á–µ—Ä–µ–¥–∏** | **Redis** | –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ in-memory K-V —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –≤—ã–ø–æ–ª–Ω—è—é—â–µ–µ –≤ —Å–∏—Å—Ç–µ–º–µ **—á–µ—Ç—ã—Ä–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∏ —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ —Ä–æ–ª–∏**. –≠—Ç–∞ –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ñ–µ–º–µ—Ä–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. **1\. –ö—ç—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Flask-Cache):** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (get\_filtered\_stats). **2\. –ë—ç–∫–µ–Ω–¥ –¥–ª—è SocketIO (Message Queue):** *–ö–ª—é—á–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å*. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Redis Pub/Sub –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ real-time —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ *—ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ (–≤–æ—Ä–∫–µ—Ä–∞–º–∏)* Flask, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º –¥–ª—è production-–æ–∫—Ä—É–∂–µ–Ω–∏—è, —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∑–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º –Ω–∞–≥—Ä—É–∑–∫–∏. **3\. –û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏ (Flask-Limiter):** –ó–∞—â–∏—Ç–∞ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –æ—Ç DoS-–∞—Ç–∞–∫ –∏ –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ –ø—É—Ç–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ —Å IP-–∞–¥—Ä–µ—Å–æ–≤. **4\. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** –û—Ç–¥–µ–ª—å–Ω–æ–µ, –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö API-–∫–ª—é—á–µ–π (–≤ decorators.py) –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –ë–î (read-heavy) –ø—Ä–∏ –∫–∞–∂–¥–æ–º API-–≤—ã–∑–æ–≤–µ. |
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** | **–ì–∏–±—Ä–∏–¥–Ω–∞—è** (Flask-Login \+ decorators.py) | –ì–∏–±–∫–∞—è, –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –º–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–∞, –æ–±—Å–ª—É–∂–∏–≤–∞—é—â–∞—è —Ä–∞–∑–Ω—ã–µ *–∫–ª–∞—Å—Å—ã* –∫–ª–∏–µ–Ω—Ç–æ–≤ (—á–µ–ª–æ–≤–µ–∫ vs. –º–∞—à–∏–Ω–∞): **1\. Flask-Login:** –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ –≤–µ–±\-—Å–µ—Å—Å–∏—è–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ httpOnly cookies –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π-–ª—é–¥–µ–π (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤), –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö SPA-–¥–∞—à–±–æ—Ä–¥ (results.html). **2\. –ö–∞—Å—Ç–æ–º–Ω—ã–µ API-–∫–ª—é—á–∏:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ (M2M) –¥–æ—Å—Ç—É–ø–∞ (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ 117-test.html, CI/CD —Å–∫—Ä–∏–ø—Ç—ã) —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä @api\_key\_required. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä @admin\_required —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–±–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (session OR key), –ø–æ–∑–≤–æ–ª—è—è –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —ç–Ω–¥–ø–æ–∏–Ω—Ç—É –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–º –∫–∞–∫ –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, —Ç–∞–∫ –∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞. |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è** | Pydantic –∏ Flask-WTF | –î–≤–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, –Ω–µ–ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏—Ö—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö: **1\. Pydantic (result\_schema.py):** –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–≥—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (–≤—Ö–æ–¥—è—â–∏—Ö JSON payload) –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ API. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–æ–ª–µ raw\_data –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º–µ SaveResultsRequest, –∑–∞—â–∏—â–∞—è –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∏–ª–∏ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (data sanitization) –Ω–∞ –≤—Ö–æ–¥–µ. **2\. Flask-WTF (forms.py):** –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ (HTML-—Ñ–æ—Ä–º, –∫–∞–∫ LoginForm) –∏, —á—Ç–æ –±–æ–ª–µ–µ –≤–∞–∂–Ω–æ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é CSRF-–∑–∞—â–∏—Ç—É –¥–ª—è –≤–µ–±\-—Å–µ—Å—Å–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞. |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | Flask-WTF (CSRF), Flask-CORS, Flask-Limiter, X-CSRFToken | –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —ç—à–µ–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ (defense-in-depth): **CORS:** –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç, –∫–∞–∫–∏–µ –¥–æ–º–µ–Ω—ã (origins) –∏–º–µ—é—Ç –ø—Ä–∞–≤–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ API. **Limiter:** –ó–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ –∏ DoS-–∞—Ç–∞–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ IP. **CSRF (WTF):** –ó–∞—â–∏—Ç–∞ –≤–µ–±\-—Å–µ—Å—Å–∏–π –∞–¥–º–∏–Ω–∞ –æ—Ç –∞—Ç–∞–∫ –º–µ–∂—Å–∞–π—Ç–æ–≤–æ–π –ø–æ–¥–¥–µ–ª–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ *–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª*: Flask-WTF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω, web/routes.py –≤–Ω–µ–¥—Ä—è–µ—Ç –µ–≥–æ –≤ meta-tag, admin/api.js —Å—á–∏—Ç—ã–≤–∞–µ—Ç –µ–≥–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ X-CSRFToken –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ). **XSS (escapeHtml):** –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—ã–≤–æ–¥–∞ –≤ ui.js –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∞—Ç–∞–∫ –º–µ–∂—Å–∞–π—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∏–Ω–≥–∞. |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | Prometheus (prometheus\_flask\_exporter) | –°–±–æ—Ä –∏ —ç–∫—Å–ø–æ—Ä—Ç production-–º–µ—Ç—Ä–∏–∫ (–∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö http\_requests\_total, —Ç–∞–∫ –∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö TESTS\_COMPLETED\_TOTAL, ANALYSIS\_DURATION\_SECONDS) –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Prometheus. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å (observability) —Å–∏—Å—Ç–µ–º—ã –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º. |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ JSON-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (logging.py) | –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º. –ö–∞–∂–¥—ã–π –ª–æ–≥ –ø–∏—à–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –∏ –æ–±–æ–≥–∞—â–∞–µ—Ç—Å—è request\_id. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–∞–º –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ (ELK Stack, Splunk, Graylog) –ª–µ–≥–∫–æ –ø–∞—Ä—Å–∏—Ç—å, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏, —á—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω–æ, *–∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞—Ç—å* –≤—Å–µ —Å–æ–±—ã—Ç–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–¥–Ω–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º HTTP-–∑–∞–ø—Ä–æ—Å–æ–º (end-to-end tracing) –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤. |
| **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** | fastdtw (–ì–∏–±—Ä–∏–¥–Ω–∞—è) | –ê–ª–≥–æ—Ä–∏—Ç–º Dynamic Time Warping. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã (—Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏). –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏ –Ω–∞ **–±—ç–∫–µ–Ω–¥–µ (analytics.py)** –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, –∏ –Ω–∞ **–∫–ª–∏–µ–Ω—Ç–µ (admin/analysis.js)**, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –≥–∏–±–∫–∏–π –≤—ã–±–æ—Ä (trade-off) –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é (–º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ) –∏ –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é (–±–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω—ã–π, –Ω–æ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ). |
| **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î** | Flask-Migrate | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (–æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ Alembic) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (flask db upgrade) –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î. |
| **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π PDF** | jsPDF, html2canvas | –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ 117-test.html –¥–ª—è –≥–∏–±—Ä–∏–¥–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF. html2canvas —Å–æ–∑–¥–∞–µ—Ç —Ä–∞—Å—Ç—Ä–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ HTML-—à–∞–±–ª–æ–Ω–∞, –∞ jsPDF —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –µ–≥–æ –≤ PDF-–¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ app —Å–µ—Ä–≤–∏—Å, –æ—Å–≤–æ–±–æ–∂–¥–∞—è –µ–≥–æ CPU –∏ –ø–∞–º—è—Ç—å –æ—Ç —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–∏—Ö –∑–∞–¥–∞—á —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –Ω–∞–≥—Ä—É–∑–∫—É –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF –Ω–∞ –º–∞—à–∏–Ω—É –∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. |
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è (DevOps)** | Docker & Docker Compose | –°–∏—Å—Ç–µ–º–∞ —É–ø–∞–∫–æ–≤–∞–Ω–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏–∑–æ–ª—è—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è. docker-compose.yml (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ–º—ã–π deploy.sh) –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ –∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (postgres, redis, app, nginx) –≤ –µ–¥–∏–Ω—É—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–µ—Ç—å. |
| **–í–µ–±-—Å–µ—Ä–≤–µ—Ä (DevOps)** | Nginx | –§—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –≤ —Ä–æ–ª–∏ High-Performance Reverse-Proxy –∏ "—Ñ–∞—Å–∞–¥–∞" –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã. –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–µ—Å—å –≤–Ω–µ—à–Ω–∏–π —Ç—Ä–∞—Ñ–∏–∫, —Ç–µ—Ä–º–∏–Ω–∏—Ä—É–µ—Ç SSL (–æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç HTTPS), —Ä–∞–∑–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å—Å–µ—Ç—ã (JS, CSS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ flask collect) –Ω–∞–ø—Ä—è–º—É—é –∏–∑ static\_data volume (–Ω–µ –Ω–∞–≥—Ä—É–∂–∞—è Flask), –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ /api –∏ /socket.io –Ω–∞ app —Å–µ—Ä–≤–∏—Å (Gunicorn/Flask) –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–≤—ã–π —ç—à–µ–ª–æ–Ω rate-limiting. |
| **SSL (DevOps)** | Certbot | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ deploy.sh –∏ docker-compose.yml (–ø—Ä–∏ —Ñ–ª–∞–≥–µ \--use-letsencrypt). –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –∏, —á—Ç–æ –≤–∞–∂–Ω–æ, **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç** SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ—Ç Let's Encrypt —á–µ—Ä–µ–∑ ACME-challenge. |
| **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (DevOps)** | Bash (deploy.sh) | –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è **"–Ω—É–ª–µ–≤–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è" (zero-touch deployment)**. –û–Ω –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã (docker compose up), –∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª *–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏* –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã —Å –Ω—É–ª—è, –≤–∫–ª—é—á–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫—É Docker, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (.env, docker-compose.yml, nginx.conf), –ø–æ–ª—É—á–µ–Ω–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î. |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (DevOps)** | Makefile | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π deploy.sh **–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (CLI Dashboard)**. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π, –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (make backup, make logs) –∫–∞–∫ —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –Ω–∞–¥ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º–∏ –∏ –¥–ª–∏–Ω–Ω—ã–º–∏ docker compose –∏ flask –∫–æ–º–∞–Ω–¥–∞–º–∏, —á—Ç–æ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã. |

### **1.3. –î–∏–∞–≥—Ä–∞–º–º–∞ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (End-to-End Flow)**

–°–ª–µ–¥—É—é—â–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Mermaid) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –¥–∞–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –û–Ω–∞ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∞, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—è —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤—Å–µ—Ö –¥–µ–≤—è—Ç–∏ –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã: –æ—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ GET-–∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

–≠—Ç–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞ –∏–º–µ–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö (data flows) –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ë–î, –ö—ç—à, Pub/Sub) –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞–∫ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (data integrity), —Ç–∞–∫ –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö –∞—Å–ø–µ–∫—Ç–∞:

1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ API-–∫–ª—é—á–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è –∫—ç—à Redis –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.  
2. –ê—Ç–æ–º–∞—Ä–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è save\_results, –≤–∫–ª—é—á–∞—é—â–∞—è –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É DocumentCounter –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π".  
3. –®–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Redis Pub/Sub, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏–∫—É API –æ—Ç real-time –æ–ø–æ–≤–µ—â–µ–Ω–∏—è.

sequenceDiagram  
    actor User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–ë—Ä–∞—É–∑–µ—Ä)  
    participant Web as –í–µ–±-—Å–µ—Ä–≤–µ—Ä (web/routes.py)  
    participant API as API-—Å–µ—Ä–≤–µ—Ä (api/routes.py)  
    participant Auth as –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (@api\_key\_required)  
    participant Cache as Redis (–ö—ç—à)  
    participant DB as –ë–î (SQLAlchemy)  
    participant Socket as –°–µ—Ä–≤–µ—Ä SocketIO  
    participant PubSub as Redis (Pub/Sub)  
    actor Admin as –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ë—Ä–∞—É–∑–µ—Ä)

    %% \--- –§–∞–∑–∞ 0: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è (–ó–∞—Ä–∞–Ω–µ–µ) \---  
    Admin-\>\>+Socket: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ WebSocket  
    Socket--\>\>-Admin: –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ  
    Note right of Admin: –ê–¥–º–∏–Ω –æ–∂–∏–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–π

    %% \--- –§–∞–∑–∞ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç–µ—Å—Ç \---  
    User-\>\>+Web: GET /117test (–∏–ª–∏ /index.html)  
    Web--\>\>-User: HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ (117-test.html)  
      
    group –§–∞–∑–∞ 1: log\_event('test\_started')  
        User-\>\>+API: POST /api/log\_event (eventType: 'test\_started', X-API-Key: ...)  
          
        %% \--- –ü—Ä–æ–≤–µ—Ä–∫–∞ API-–∫–ª—é—á–∞ \---  
        API-\>\>+Auth: @api\_key\_required  
        Auth-\>\>+Cache: cache.get(api\_key) ?  
        Cache--\>\>-Auth: (miss)  
        Auth-\>\>+DB: ApiKey.query(key) ?  
        DB--\>\>-Auth: key\_obj  
        Auth-\>\>+Cache: cache.set(key\_obj)  
        Auth-\>\>+DB: UPDATE ApiKey SET usage\_count...  
        Auth--\>\>-API: –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω  
          
        %% \--- –õ–æ–≥–∏–∫–∞ 'log\_event' \---  
        API-\>\>+DB: db.session.get(ResultMetadata, session\_id) ?  
        DB--\>\>-API: None (–°–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞)  
        API-\>\>DB: INSERT ResultMetadata (session\_id, test\_type="pending")  
        API-\>\>DB: INSERT ProctoringEvent (eventType='test\_started')  
        API-\>\>DB: db.session.commit()  
        API--\>\>-User: 200 OK  
    end

    loop –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ç–µ—Å—Ç  
        User-\>\>API: POST /api/log\_event (eventType: 'focus\_loss', ...)  
        %% (–ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –§–∞–∑–∞ 1, –Ω–æ —Å–µ—Å—Å–∏—è —É–∂–µ –Ω–∞–π–¥–µ–Ω–∞)  
        API-\>\>User: 200 OK  
    end

    %% \--- –§–∞–∑–∞ 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ç–µ—Å—Ç \---  
    group –§–∞–∑–∞ 2: save\_results  
        User-\>\>+API: POST /api/save\_results (JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏, X-API-Key: ...)  
          
        %% \--- –ü—Ä–æ–≤–µ—Ä–∫–∞ API-–∫–ª—é—á–∞ (—Ç–µ–ø–µ—Ä—å –∏–∑ –∫—ç—à–∞) \---  
        API-\>\>+Auth: @api\_key\_required  
        Auth-\>\>+Cache: cache.get(api\_key) ?  
        Cache--\>\>-Auth: key\_obj (hit)  
        Auth-\>\>+DB: UPDATE ApiKey SET usage\_count...  
        Auth--\>\>-API: –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω

        %% \--- –õ–æ–≥–∏–∫–∞ 'save\_results' (–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è) \---  
        Note over API,DB: –ù–∞—á–∞–ª–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏  
        API-\>\>API: –í–∞–ª–∏–¥–∞—Ü–∏—è JSON (SaveResultsRequest)  
          
        API-\>\>DB: get\_or\_create\_user() (INSERT... ON CONFLICT...)  
        DB--\>\>API: user\_obj  
          
        API-\>\>DB: get\_or\_create\_fingerprint()  
        DB--\>\>API: fingerprint\_obj

        API-\>\>DB: db.session.get(ResultMetadata, session\_id)  
        DB--\>\>-API: 'pending' result\_obj  
          
        API-\>\>API: result.score \= 95, result.raw\_data \= {...}

        alt –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω (score \>= 80\)  
            API-\>\>DB: –í—ã–∑–æ–≤ generate\_document\_number()  
            Note right of DB: Pessimistic Lock: \\n SELECT... FOR UPDATE  
            DB-\>\>DB: UPDATE DocumentCounter SET last\_sequence\_number \+= 1  
            DB--\>\>API: doc\_number (e.g., "25/11-0001")  
              
            API-\>\>API: result.document\_number \= "25/11-0001"  
            API-\>\>DB: INSERT Certificate (...)  
        end  
          
        API-\>\>DB: db.session.commit()  
        Note over API,DB: –§–∏–∫—Å–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏  
        DB--\>\>API: Commit OK

        %% \--- –§–∞–∑–∞ 3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–ø–æ—Å–ª–µ Commit) \---  
        group –§–∞–∑–∞ 3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞  
            API-\>\>Cache: cache.delete\_memoized(get\_results\_api)  
              
            API-\>\>Socket: socketio.emit("update\_needed", ...)  
            Note right of Socket: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è message\_queue\\n–ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç emit() –∏...  
              
            Socket-\>\>+PubSub: PUBLISH "updates" ({"type": "update\_needed"})  
              
            Note over PubSub,Admin: 'redis\_subscriber' –Ω–∞ –í–°–ï–• \\n—Å–µ—Ä–≤–µ—Ä–∞—Ö —Å–ª—É—à–∞–µ—Ç –∫–∞–Ω–∞–ª "updates"  
              
            PubSub--\>\>+Socket: (–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ)  
            Socket-\>\>Admin: emit("update\_needed") (WebSocket push)  
            Socket--\>\>-PubSub: (–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ)  
        end  
          
        API-\>\>API: METRICS.TESTS\_COMPLETED\_TOTAL.inc()  
        API--\>\>-User: 201 Created ({"officialDocumentNumber": "25/11-0001"})  
    end

## **2\. –ö–ª—é—á–µ–≤–∞—è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ –ü–æ—Ç–æ–∫–∏ –î–∞–Ω–Ω—ã—Ö (Use Cases)**

### **2.1. –ü–æ—Ç–æ–∫ 1: –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (–ü–æ–ª–Ω—ã–π "–¢—É–Ω–Ω–µ–ª—å" –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)**

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å—Ç—Ä–æ–≥–æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é 4-—ç—Ç–∞–ø–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å ("—Ç—É–Ω–Ω–µ–ª—å"), –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –≠—Ç–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ–±—Ö–æ–¥–∞ —ç—Ç–∞–ø–æ–≤ –æ–±—É—á–µ–Ω–∏—è –∏–ª–∏ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.

**–≠—Ç–∞–ø 1: index.html (–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏ –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)**

* **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–≤–æ–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–§–ò–û, –¥–æ–ª–∂–Ω–æ—Å—Ç—å).  
* **–ú–µ—Ö–∞–Ω–∏–∑–º:** –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π JS (setupPersistentId) –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–µ—Ç –∏–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–≤–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞: persistentUserId\_infosec (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ cookie –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞) –∏ lastTesterId\_infosec (–≤ localStorage –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è) \[cite: index.html\].  
* **–¶–µ–ª—å:** persistentId —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ "—è–∫–æ—Ä—è" (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥—É—Ç –ø—Ä–∏–≤—è–∑–∞–Ω—ã –≤—Å–µ –±—É–¥—É—â–∏–µ —Å–æ–±—ã—Ç–∏—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –§–ò–û —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage (lastUserInfo) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã, –∏–∑–±–µ–≥–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–≤–æ–¥–∞.

**–≠—Ç–∞–ø 2: index-start.html (–ü–æ—Ä—Ç–∞–ª –∏ –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)**

* **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö–∞–± —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —É—á–µ–±–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏.  
* **–ú–µ—Ö–∞–Ω–∏–∑–º:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —è–≤–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (warning-box) –æ "–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏—Ä–æ–≤–∞–Ω–∏–∏", "–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–º –∞–Ω–∞–ª–∏–∑–µ" –∏ "–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ —Ñ–æ–∫—É—Å–∞" \[cite: index-start.html\].  
* **–¶–µ–ª—å:** –°–æ–±–ª—é–¥–µ–Ω–∏–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è) –∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ —Ç–æ–º—É, —á—Ç–æ –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è, —á—Ç–æ —Å–∞–º–æ –ø–æ —Å–µ–±–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω–æ–π –º–µ—Ä–æ–π.

**–≠—Ç–∞–ø 3: study-117.html (–û–±—É—á–µ–Ω–∏–µ —Å –ü–µ—Ä–≤–∏—á–Ω—ã–º –ü—Ä–æ–∫—Ç–æ—Ä–∏–Ω–≥–æ–º)**

* **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑—É—á–∞–µ—Ç —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.  
* **–ú–µ—Ö–∞–Ω–∏–∑–º:**  
  * **–ó–∞—â–∏—Ç–∞:** –°–∫—Ä–∏–ø—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç localStorage.getItem('lastUserInfo'). –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø—ã—Ç–∞–ª—Å—è –æ–±–æ–π—Ç–∏ index.html), –æ–Ω –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ index.html \[cite: study-117.html\].  
  * **–ù–∞—á–∞–ª–æ –ü—Ä–æ–∫—Ç–æ—Ä–∏–Ω–≥–∞:** –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è logEventToServer('study\_started', ...), —á—Ç–æ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π (pending) –∑–∞–ø–∏—Å–∏ –≤ ResultMetadata (—Å–æ–≥–ª–∞—Å–Ω–æ –î–∏–∞–≥—Ä–∞–º–º–µ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏) \[cite: study-117.html, routes.py\].  
  * **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö:** –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è module\_view\_time (–≤—Ä–µ–º—è –Ω–∞ –º–æ–¥—É–ª—å) –∏ scroll\_depth\_milestone (–≥–ª—É–±–∏–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏) –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º \[cite: study-117.html\].  
  * **–ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:** –ê–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ (\#watermark —Å –§–ò–û), –∑–∞—â–∏—Ç–∞ –æ—Ç PrintScreen (screenshot\_attempt), –ø–µ—á–∞—Ç–∏ (print\_attempt), –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é –∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ \[cite: study-117.html\].  
* **–¶–µ–ª—å:** –°–±–æ—Ä –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –æ–±—É—á–µ–Ω–∏–µ. –≠—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ (module\_view\_time, scroll\_depth\_milestone) –ø–æ–∑–≤–æ–ª—è—é—Ç –±—ç–∫–µ–Ω–¥-–ª–æ–≥–∏–∫–µ (get\_behavior\_analysis) –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞—Ç—å –≤—ã—Å–æ–∫–∏–π –±–∞–ª–ª —Å –Ω–∏–∑–∫–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –æ–±—É—á–µ–Ω–∏—è, –≤—ã—è–≤–ª—è—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∞–Ω–æ–º–∞–ª–∏–∏.

**–≠—Ç–∞–ø 4: 117-test.html (–¢–µ—Å—Ç –∏ –§–∏–Ω–∞–ª—å–Ω—ã–π –°–±–æ—Ä –ú–µ—Ç—Ä–∏–∫)**

* **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.  
* **–ú–µ—Ö–∞–Ω–∏–∑–º:** –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ JS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ PersonalDataTestApp \[cite: 117-test.html\].  
  * **–ê–∫—Ç–∏–≤–Ω—ã–π –ü—Ä–æ–∫—Ç–æ—Ä–∏–Ω–≥ (–ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏–π):** –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è focus\_loss, screenshot\_attempt (—Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π "–≤—Å–ø—ã—à–∫–∏" –¥–ª—è –ø–æ—Ä—á–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) –∏ print\_attempt, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ logEventToServer \[cite: 117-test.html\].  
  * **–ü–∞—Å—Å–∏–≤–Ω—ã–π –°–±–æ—Ä (–ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö):** –í —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏: keyboardDynamics (—Ä–∏—Ç–º –Ω–∞–±–æ—Ä–∞ –§–ò–û), mouseMovements (–º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º—ã—à–∏ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏), latency (–≤—Ä–µ–º—è –Ω–∞ –æ—Ç–≤–µ—Ç), answerChanges (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–µ—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏) \[cite: 117-test.html\].  
* **–¶–µ–ª—å:** –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ, –º–Ω–æ–≥–æ–∞—Å–ø–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –ø–æ—Ä—Ç—Ä–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤–æ –≤—Ä–µ–º—è —ç–∫–∑–∞–º–µ–Ω–∞ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤—ã—è–≤–ª–µ–Ω–∏—è –Ω–µ—Ç–∏–ø–∏—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.

**–≠—Ç–∞–ø 5: POST /api/save\_results (–ê—Ç–æ–º–∞—Ä–Ω–æ–µ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –ë—ç–∫–µ–Ω–¥–µ)**

* **–î–µ–π—Å—Ç–≤–∏–µ:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ (—á–µ—Ä–µ–∑ finishTest()) –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—ã–π JSON-–æ–±—ä–µ–∫—Ç payload –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ –±—ç–∫–µ–Ω–¥ \[cite: 117-test.html\].  
* **–ú–µ—Ö–∞–Ω–∏–∑–º:**  
  * **–í–∞–ª–∏–¥–∞—Ü–∏—è:** Pydantic (—Å—Ö–µ–º–∞ SaveResultsRequest) –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ payload –∏–º–µ–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏ –æ–∂–∏–¥–∞–µ–º—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É \[cite: result\_schema.py, routes.py\].  
  * **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è:** –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤ –ë–î –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö \[cite: routes.py\]:  
    1. get\_or\_create\_user (–∞—Ç–æ–º–∞—Ä–Ω—ã–π INSERT ... ON CONFLICT...).  
    2. ResultMetadata –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑ pending –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–±–∞–ª–ª, raw\_data –∏ —Ç.–¥.).  
    3. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞: generate\_document\_number() –±–ª–æ–∫–∏—Ä—É–µ—Ç (with\_for\_update()) —Ç–∞–±–ª–∏—Ü—É DocumentCounter –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π" –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –Ω–æ–º–µ—Ä–æ–≤ \[cite: document.py\].  
    4. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ Certificate.  
  * **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ commit() —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, notify\_clients\_of\_update –ø—É–±–ª–∏–∫—É–µ—Ç update\_needed –≤ Redis Pub/Sub \[cite: websocket.py, routes.py\].  
* **–¶–µ–ª—å:** –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏–Ω—Ü–∏–ø "–≤—Å–µ –∏–ª–∏ –Ω–∏—á–µ–≥–æ"), –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–æ–º–µ—Ä–æ–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (—á–µ—Ä–µ–∑ with\_for\_update) –∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –æ –Ω–æ–≤–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.

**–≠—Ç–∞–ø 6: 117-test.html (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –Ω–∞ –ö–ª–∏–µ–Ω—Ç–µ)**

* **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.  
* **–ú–µ—Ö–∞–Ω–∏–∑–º:** –ë—ç–∫–µ–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 201 Created c officialDocumentNumber. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (generateAndDownloadOfficialPDF) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç jsPDF –∏ html2canvas –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ PDF –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –≤—Å—Ç–∞–≤–ª—è—è –≤ –Ω–µ–≥–æ officialDocumentNumber –∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ PDF\_SETTINGS (–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –±—ç–∫–µ–Ω–¥–æ–º) \[cite: 117-test.html\].  
* **–¶–µ–ª—å:** –°–Ω–∏–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (–ø–µ—Ä–µ–Ω–æ—Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ PDF –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞) –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### **2.2. –ü–æ—Ç–æ–∫ 2: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (–ú–æ–¥—É–ª—å SPA)**

–î–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ SPA (Single Page Application), –≤—ã—Å—Ç—É–ø–∞—é—â–µ–µ —Ü–µ–Ω—Ç—Ä–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ï–≥–æ —Ä–∞–±–æ—Ç–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è main.js \[cite: main.js\].

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**  
   * **–î–µ–π—Å—Ç–≤–∏–µ:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é.  
   * **–ú–µ—Ö–∞–Ω–∏–∑–º:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ /login (—Ñ–æ—Ä–º–∞ LoginForm), Flask —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é httpOnly cookie-—Å–µ—Å—Å–∏—é \[cite: routesweb.py, forms.py\]. –ë—ç–∫–µ–Ω–¥ —Ä–µ–Ω–¥–µ—Ä–∏—Ç *–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞–∑* results.html, –≤ –∫–æ—Ç–æ—Ä—ã–π *–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ* –≤—Å—Ç—Ä–æ–µ–Ω meta- —Ç–µ–≥ —Å csrf\_token \[cite: results.html\].  
   * **–¶–µ–ª—å:** main.js –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç SPA. api.js –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç socket.io (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ update\_needed) –∏ safeFetch \[cite: main.js, api.js\].  
   * **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** safeFetch –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç—ã–≤–∞–µ—Ç csrf\_token –∏–∑ meta- —Ç–µ–≥–∞ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ X-CSRFToken *–∫–∞–∂–¥–æ–≥–æ* –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ API-–∑–∞–ø—Ä–æ—Å–∞ (–≤–∫–ª—é—á–∞—è POST, PUT, DELETE), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å–∫–≤–æ–∑–Ω—É—é CSRF-–∑–∞—â–∏—Ç—É –¥–ª—è –≤—Å–µ–≥–æ SPA \[cite: api.js\].  
2. **–î–∞—à–±–æ—Ä–¥ (dashboard-view):**  
   * **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.  
   * **–ú–µ—Ö–∞–Ω–∏–∑–º:** apiClient –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç:  
     * /api/get\_dashboard\_stats (–¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, "–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª") \[cite: api.js\].  
     * /api/get\_results (–¥–ª—è —Ç–∞–±–ª–∏—Ü—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏) \[cite: api.js\].  
   * **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –¢–∞–±–ª–∏—Ü–∞ (ui.renderDataTable) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ø–∞–≥–∏–Ω–∞—Ü–∏—é (–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ N –∑–∞–ø–∏—Å–µ–π), –Ω–æ –≥–∏–±—Ä–∏–¥–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é: —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "pending") —É—Ö–æ–¥—è—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ–±—ä–µ–º–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö), –∞ –ø–æ–∏—Å–∫ –ø–æ –§–ò–û –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (applyFiltersAndRender), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (UX) \[cite: ui.js, main.js\].  
   * **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ui.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö–µ–ª–ø–µ—Ä escapeHtml –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –æ—Ç API \[cite: ui.js\].  
3. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ (comparison-view):**  
   * **–î–µ–π—Å—Ç–≤–∏–µ:** –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π.  
   * **–ú–µ—Ö–∞–Ω–∏–∑–º:**  
     * –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Å—Å–∏–∏ (–∏—Ö ID —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ state.js) \[cite: state.js\].  
     * apiClient –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–µ raw\_data (fetchFullResultDetails) –¥–ª—è —ç—Ç–∏—Ö —Å–µ—Å—Å–∏–π \[cite: api.js\].  
     * –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ–∫–±–æ–∫—Å **"–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"**, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–Ω—ã–π –≤—ã–±–æ—Ä (trade-off) –º–µ–∂–¥—É —Ä–µ—Å—É—Ä—Å–∞–º–∏ \[cite: results.html\]:  
       * **–ù–µ –Ω–∞–∂–∞—Ç (–ö–ª–∏–µ–Ω—Ç):** analysis.js –≤—ã–ø–æ–ª–Ω—è–µ—Ç fastDTW –∏ analyzeFingerprints *–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ*. –≠—Ç–æ –±—ã—Å—Ç—Ä–æ, –ø—Ä–∏–≤–∞—Ç–Ω–æ (–¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∏–¥–∞—é—Ç –±—Ä–∞—É–∑–µ—Ä –∞–¥–º–∏–Ω–∞) –∏ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä \[cite: analysis.js\].  
       * **–ù–∞–∂–∞—Ç (–°–µ—Ä–≤–µ—Ä):** apiClient –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ID —Å–µ—Å—Å–∏–π –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç /api/analyze\_mouse –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ, –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –∏ —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ \[cite: main.js, api.js, routes.py\].  
   * **–¶–µ–ª—å:** –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≥–∏–±–∫–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞, –≤–∞—Ä—å–∏—Ä—É—é—â–µ–≥–æ—Å—è –æ—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ –≥–ª—É–±–æ–∫–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤.  
4. **–ñ—É—Ä–Ω–∞–ª –°–æ–±—ã—Ç–∏–π (–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ):**  
   * **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–π–º–ª–∞–π–Ω–∞ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.  
   * **–ú–µ—Ö–∞–Ω–∏–∑–º:** –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ "üëÅÔ∏è", apiClient –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç /api/get\_events/{sessionId} \[cite: api.js\].  
   * **–¶–µ–ª—å:** ui.renderEventLog –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —É–¥–æ–±–Ω—ã–π —Ç–∞–π–º–ª–∞–π–Ω –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π (focus\_loss, print\_attempt, study\_started), –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–∏–∑—É–∞–ª—å–Ω–æ –≤—ã–¥–µ–ª—è—è –Ω–∞—Ä—É—à–µ–Ω–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ \[cite: ui.js\].  
5. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ù–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (settings-view):**  
   * **–î–µ–π—Å—Ç–≤–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ PDF).  
   * **–ú–µ—Ö–∞–Ω–∏–∑–º:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª "–ß—Ç–µ–Ω–∏–µ-–ó–∞–ø–∏—Å—å" \[cite: main.js, api.js, ui.js\]:  
     * **–ß—Ç–µ–Ω–∏–µ:** GET /api/settings (apiClient.fetchSettings) –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.  
     * **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:** ui.renderSettingsForm –∑–∞–ø–æ–ª–Ω—è–µ—Ç HTML-—Ñ–æ—Ä–º—É.  
     * **–ó–∞–ø–∏—Å—å:** POST /api/settings (apiClient.saveSettings) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å X-CSRFToken).  
   * **–¶–µ–ª—å:** –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ (real-time) –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –§–ò–û –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–∞ –≤ PDF) –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –ø—Ä—è–º–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –≤ –ë–î.

## **3\. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ú–æ–¥—É–ª—å –ü—Ä–æ–∫—Ç–æ—Ä–∏–Ω–≥–∞)**

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—ã–π –∞–≥–µ–Ω—Ç –ø–æ —Å–±–æ—Ä—É –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –∫–∞–∫ –ø–∞—Å—Å–∏–≤–Ω—ã–π –≤–µ–±\-—Å–∞–π—Ç.

### **3.1. "–¢—É–Ω–Ω–µ–ª—å" (Enforced User Flow)**

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è 4-—ç—Ç–∞–ø–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å ("—Ç—É–Ω–Ω–µ–ª—å") —è–≤–ª—è–µ—Ç—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∫—Ç–æ—Ä–∏–Ω–≥–∞ (–Ω–µ–ª—å–∑—è –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç, –Ω–µ –ø—Ä–æ–π–¥—è –æ–±—É—á–µ–Ω–∏–µ).

1. **index.html**: –°–±–æ—Ä –§–ò–û, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ persistentId (—è–∫–æ—Ä—å —Å–µ—Å—Å–∏–∏).  
2. **index-start.html**: –ü–æ—Ä—Ç–∞–ª –∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ (–∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ).  
3. **study-117.html**: –û–±—É—á–µ–Ω–∏–µ \+ –ø–µ—Ä–≤—ã–π —ç—Ç–∞–ø –ø—Ä–æ–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—Å–±–æ—Ä study\_started, scroll\_depth –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏).  
4. **117-test.html**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ \+ –≤—Ç–æ—Ä–æ–π —ç—Ç–∞–ø –ø—Ä–æ–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—Å–±–æ—Ä –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫).

*–°–ª–µ–¥—É–µ—Ç –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—å, —á—Ç–æ –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø (–Ω–∞—á–∏–Ω–∞—è —Å–æ 2-–≥–æ) –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É localStorage, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –±—ã–ª –ø—Ä–æ–π–¥–µ–Ω. –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ study-117.html –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–º—É —Ä–µ–¥–∏—Ä–µ–∫—Ç—É –Ω–∞ index.html.*

### **3.2. –°–∏—Å—Ç–µ–º–∞ –ü—Ä–æ–∫—Ç–æ—Ä–∏–Ω–≥–∞ (117-test.html)**

JS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ PersonalDataTestApp –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞–∫ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ, —Ç–∞–∫ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —á–µ—Å—Ç–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∞.

#### **–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –§–∞–∫—Ç–æ—Ä (–ê–∫—Ç–∏–≤–Ω–æ–µ –°–¥–µ—Ä–∂–∏–≤–∞–Ω–∏–µ):**

* **"–°–ª–µ–¥—è—â–∏–π –ì–ª–∞–∑" (\#proctor-eye):** –î–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –∏–∫–æ–Ω–∫—É, –∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫—É—Ä—Å–æ—Ä –º—ã—à–∏ (updateProctorEye), –∏–º–∏—Ç–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–º–æ—Ä–≥–∞–µ—Ç triggerEyeBlink, —Å–æ–≤–µ—Ä—à–∞–µ—Ç —Å–∞–∫–∫–∞–¥—ã triggerEyeSaccade) \[cite: 117-test.html\].  
* **–†–µ–∞–∫—Ü–∏—è –Ω–∞ –Ω–∞—Ä—É—à–µ–Ω–∏—è:** –û–Ω –∏–∑–º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç –Ω–∞ **"–∂–µ–ª—Ç—ã–π" (.warning)** –ø—Ä–∏ blur –∏ **"–∫—Ä–∞—Å–Ω—ã–π" (.alert)** –ø—Ä–∏ PrintScreen, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ —Ç–æ–º, —á—Ç–æ –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞–º–µ—á–µ–Ω–æ. –≠—Ç–æ —Å–ª—É–∂–∏—Ç —Å–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º —Ñ–∞–∫—Ç–æ—Ä–æ–º \[cite: 117-test.html\].

#### **–ê–∫—Ç–∏–≤–Ω—ã–π –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏–π):**

* **blur (–£—Ö–æ–¥ —Å–æ –≤–∫–ª–∞–¥–∫–∏):** logEventToServer('focus\_loss') \[cite: 117-test.html\].  
* **e.keyCode \=== 44 (PrintScreen):** logEventToServer('screenshot\_attempt') \+ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –±–µ–ª–∞—è "–≤—Å–ø—ã—à–∫–∞" (\#flash-overlay), –∫–æ—Ç–æ—Ä–∞—è "–∑–∞—Å–≤–µ—á–∏–≤–∞–µ—Ç" –∏ *–¥–µ–ª–∞–µ—Ç –Ω–µ—á–∏—Ç–∞–µ–º—ã–º* (–ø–æ—Ä—Ç–∏—Ç) —Å–∫—Ä–∏–Ω—à–æ—Ç \[cite: 117-test.html\].  
* **beforeprint (–ü–µ—á–∞—Ç—å):** logEventToServer('print\_attempt') \[cite: 117-test.html\].

#### **–ü–∞—Å—Å–∏–≤–Ω—ã–π –°–±–æ—Ä (–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ú–µ—Ç—Ä–∏–∫–∏):**

* keyboardDynamics: –°–±–æ—Ä —Ç–∞–π–º–∏–Ω–≥–æ–≤ keydown/keyup –ø—Ä–∏ –≤–≤–æ–¥–µ –§–ò–û –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è "–∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–≥–æ –ø–æ—á–µ—Ä–∫–∞" \[cite: 117-test.html\].  
* mouseMovements: –ó–∞–ø–∏—Å—å –≤—Å–µ–≥–æ –ø—É—Ç–∏ –º—ã—à–∏ (\[\[x, y, timestamp\], ...\]) –Ω–∞ –∫–∞–∂–¥–æ–º –≤–æ–ø—Ä–æ—Å–µ –¥–ª—è fastdtw –∞–Ω–∞–ª–∏–∑–∞ \[cite: 117-test.html\].  
* latency: –í—Ä–µ–º—è (–≤ –º—Å) –æ—Ç –ø–æ–∫–∞–∑–∞ –≤–æ–ø—Ä–æ—Å–∞ –¥–æ –æ—Ç–≤–µ—Ç–∞ \[cite: 117-test.html\].  
* answerChanges: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–º–µ–Ω –æ—Ç–≤–µ—Ç–∞ (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–µ—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏) \[cite: 117-test.html\].

### **3.3. –°–±–æ—Ä–∫–∞ Payload –∏ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF**

* **Payload (–ö–æ–Ω—Ç—Ä–∞–∫—Ç —Å API):** finishTest() –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —ç—Ç–∏ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (userInfo, testResults, sessionMetrics, behavioralMetrics) –≤ –µ–¥–∏–Ω—ã–π payload. –≠—Ç–æ—Ç payload –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Pydantic-—Å—Ö–µ–º–µ –±—ç–∫–µ–Ω–¥–∞ SaveResultsRequest. –û–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–∞–∫ "–∫–æ–Ω—Ç—Ä–∞–∫—Ç" –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö \[cite: 117-test.html, result\_schema.py\].  
* **–ì–∏–±—Ä–∏–¥–Ω—ã–π PDF:** –û–ø–∏—à–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—â–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:  
  1. **–ë—ç–∫–µ–Ω–¥** (—á–µ—Ä–µ–∑ SystemSetting) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –§–ò–û –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–æ–≤) —á–µ—Ä–µ–∑ PDF\_SETTINGS, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ 117-test.html \[cite: routesweb.py, 117-test.html\].  
  2. **–ë—ç–∫–µ–Ω–¥** (—á–µ—Ä–µ–∑ save\_results) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç officialDocumentNumber –≤ JSON-–æ—Ç–≤–µ—Ç–µ \[cite: routes.py\].  
  3. **–§—Ä–æ–Ω—Ç–µ–Ω–¥** (generateAndDownloadOfficialPDF) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç html2canvas –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è "—Å–Ω–∏–º–∫–∞" —Å–∫—Ä—ã—Ç–æ–≥–æ HTML-—à–∞–±–ª–æ–Ω–∞ (\#pdf-official-blank-container) –∏ jsPDF –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏ –µ–≥–æ –≤ PDF *–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ* \[cite: 117-test.html\].  
  * **–í—ã–≥–æ–¥–∞:** –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (CPU) –Ω–µ –∑–∞—Ç—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ PDF; —Å–µ—Ä–≤–µ—Ä –ª–∏—à—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ.

### **3.4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞**

* –£–ø–æ–º—è–Ω–∏—Ç–µ –Ω–∞–ª–∏—á–∏–µ "–º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—è" (this.overridePassword \= 'QmFzZTExNw==') –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–æ–ø—ã—Ç–æ–∫ (showPasswordPrompt), –∫–æ—Ç–æ—Ä—ã–π –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –∏–∑ Base64 –≤ **"Base117"**. –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ —Ä–µ–∂–∏–º–µ "–∫–∏–æ—Å–∫–∞" –∏–ª–∏ –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) \[cite: 117-test.html\].

## **4\. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–ê–¥–º–∏–Ω-–ü–∞–Ω–µ–ª—å SPA)**

–î–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π SPA, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SoC).

### **4.1. –ú–æ–¥—É–ª—å–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ("–ú–æ–∑–≥")**

–û–ø–∏—à–∏—Ç–µ 5-–º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É SPA, –æ–±—ä—è—Å–Ω—è—è —Ä–æ–ª—å –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è:

1. **state.js (–°–µ—Ä–¥—Ü–µ / –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã):**  
   * **–†–æ–ª—å:** –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –•—Ä–∞–Ω–∏—Ç –≤—Å–µ —ç—Ñ–µ–º–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (allLoadedResults, settings, currentPage).  
   * **–ü—Ä–∏–Ω—Ü–∏–ø:** –ù–∏ –æ–¥–∏–Ω –¥—Ä—É–≥–æ–π –º–æ–¥—É–ª—å –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞–ø—Ä—è–º—É—é –∏–∑–º–µ–Ω—è—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —ç–∫–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏-—Å–µ—Ç—Ç–µ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, setCurrentPageResults). –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∏ –æ—Ç–ª–∞–∂–∏–≤–∞–µ–º—ã–π (unidirectional) –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö \[cite: state.js\].  
2. **api.js (–†—É–∫–∏ / –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö):**  
   * **–†–æ–ª—å:** –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±—ç–∫–µ–Ω–¥–æ–º. –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –≤—Å—é –ª–æ–≥–∏–∫—É —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (loadInitialData, fetchFullResultDetails, saveSettings).  
   * **–ú–µ—Ö–∞–Ω–∏–∑–º—ã:** –†–µ–∞–ª–∏–∑—É–µ—Ç safeFetch –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è X-CSRFToken –∫–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç socket.io –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è update\_needed –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞, *–≤—ã–∑—ã–≤–∞—è, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ç—Ç–µ—Ä—ã –∏–∑ state.js* \[cite: api.js\].  
3. **ui.js (–õ–∏—Ü–æ / –°–ª–æ–π –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è):**  
   * **–†–æ–ª—å:** –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ DOM.  
   * **–ü—Ä–∏–Ω—Ü–∏–ø:** –Ø–≤–ª—è–µ—Ç—Å—è "–≥–ª—É–ø—ã–º" (dumb) –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º; –æ–Ω *–Ω–∏–∫–æ–≥–¥–∞* –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç API. –û–Ω *—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ* —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ *—Ç–æ–ª—å–∫–æ* –∏–∑ state.js –∏ –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å—Ç—Ä–æ–∏—Ç HTML (renderDashboardCharts, renderDataTable) \[cite: ui.js\].  
4. **analysis.js (–ú–æ–∑–≥ / –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞):**  
   * **–†–æ–ª—å:** –í—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–æ–∂–Ω—ã–µ, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —Å–Ω–∏–∂–∞—è –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä.  
   * **–ú–µ—Ö–∞–Ω–∏–∑–º—ã:** analyzeFingerprints (–≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å–µ—Å—Å–∏–∏ –ø–æ privacySafeHash –∏ –∏—â–µ—Ç –∞–Ω–æ–º–∞–ª–∏–∏) –∏ fastDTW (–ø–æ–ª–Ω–∞—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Dynamic Time Warping) \[cite: analysis.js\].  
5. **main.js (–ù–µ—Ä–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ / –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä):**  
   * **–†–æ–ª—å:** "–°–∫–ª–µ–∏–≤–∞–µ—Ç" –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (DOMContentLoaded).  
   * **–ú–µ—Ö–∞–Ω–∏–∑–º:** –°–æ–¥–µ—Ä–∂–∏—Ç *–≤—Å–µ—Ö* —Å–ª—É—à–∞—Ç–µ–ª–µ–π —Å–æ–±—ã—Ç–∏–π (–∫–ª–∏–∫–∏, –≤–≤–æ–¥). –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫–æ–º: *–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –°–æ–±—ã—Ç–∏–µ (–∫–ª–∏–∫)* \-\> main.js \-\> apiClient.fetch() \-\> (Promise resolves) \-\> state.setter() \-\> ui.render() \[cite: main.js\].

### **4.2. –ö–ª—é—á–µ–≤—ã–µ –ú–µ—Ö–∞–Ω–∏–∑–º—ã –ê–¥–º–∏–Ω-–ü–∞–Ω–µ–ª–∏**

* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (CSRF & XSS):**  
  * **CSRF:** –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: 1\) Flask —Ä–µ–Ω–¥–µ—Ä–∏—Ç csrf\_token –≤ meta- —Ç–µ–≥ –≤ results.html. 2\) api.js –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —á–∏—Ç–∞–µ—Ç —Ç–æ–∫–µ–Ω. 3\) safeFetch *–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏* –≤—Å—Ç–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ X-CSRFToken *–∫–∞–∂–¥–æ–≥–æ* fetch-–∑–∞–ø—Ä–æ—Å–∞ (POST/PUT/DELETE), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø–æ–ª–Ω—É—é –∑–∞—â–∏—Ç—É \[cite: results.html, api.js\].  
  * **XSS:** ui.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö–µ–ª–ø–µ—Ä escapeHtml –¥–ª—è —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –§–ò–û) –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π –≤ innerHTML \[cite: ui.js\].  
* **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ê–Ω–∞–ª–∏–∑ (DTW):**  
  * –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å, –≥–¥–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –º—ã—à–∏:  
    * **–ö–ª–∏–µ–Ω—Ç (–±—ã—Å—Ç—Ä–æ):** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è analysis.js (—á–µ–∫–±–æ–∫—Å "–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑" —Å–Ω—è—Ç). –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ \[cite: analysis.js\].  
    * **–°–µ—Ä–≤–µ—Ä (—Ç–æ—á–Ω–æ):** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è POST /api/analyze\_mouse (—á–µ–∫–±–æ–∫—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω). –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è "—Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è" \[cite: main.js\].  
* **"–£–º–Ω—ã–π" –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ (DOM Diffing):**  
  * ui.js (—á–µ—Ä–µ–∑ updateTableRows) –Ω–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –≤—Å—é —Ç–∞–±–ª–∏—Ü—É (—á—Ç–æ –≤—ã–∑–≤–∞–ª–æ –±—ã "–º–æ—Ä–≥–∞–Ω–∏–µ" –∏ –ø–æ—Ç–µ—Ä—é —Ñ–æ–∫—É—Å–∞). –û–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø—Ä–æ—Å—Ç—É—é —Ç–µ—Ö–Ω–∏–∫—É "DOM diffing": —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ state.js —Å–æ —Å—Ç–∞—Ä—ã–º –∏ —Ç–æ—á–µ—á–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç, –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ \<tr\> —ç–ª–µ–º–µ–Ω—Ç—ã. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–ª–∞–≤–Ω–æ—Å—Ç—å UX \[cite: ui.js\].  
* **–ê–Ω–∞–ª–∏–∑ –û—Ç–ø–µ—á–∞—Ç–∫–æ–≤ (Fingerprints):**  
  * analysis.js (—á–µ—Ä–µ–∑ analyzeFingerprints) –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –ø–æ privacySafeHash –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∞–Ω–æ–º–∞–ª–∏–π \[cite: analysis.js\].

## **5\. –ê–Ω–∞–ª–∏–∑ –ö–ª—é—á–µ–≤—ã—Ö –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Backend)**

### **5.1. –ú–æ–¥–µ–ª–∏ –î–∞–Ω–Ω—ã—Ö (models.py)**

* User: –ì–∏–±—Ä–∏–¥–Ω–∞—è –º–æ–¥–µ–ª—å. –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –ø–æ persistent\_id (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) –∏–ª–∏ –ø–æ email/password\_hash (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä) \[cite: models.py\].  
* ResultMetadata: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–µ –ø–æ–ª–µ:** raw\_data (JSON). –§—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –≤ —Ä–æ–ª–∏ "data lake", —Ö—Ä–∞–Ω—è *–≤–µ—Å—å* payload —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞. –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ (schema-on-read) –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ –±—É–¥—É—â–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–∏–¥—ã –∞–Ω–∞–ª–∏–∑–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏, *–Ω–µ —Ç—Ä–µ–±—É—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º—ã –ë–î*, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ "—Å—ã—Ä—ã–µ" –¥–∞–Ω–Ω—ã–µ —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã \[cite: models.py\].  
* ProctoringEvent: –ñ—É—Ä–Ω–∞–ª –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π (study\_started, focus\_loss –∏ —Ç.–¥.) \[cite: models.py\].  
* SystemSetting: K-V —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–≤–∫–ª—é—á–∞—è PDF\_SETTINGS), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å "–Ω–∞ –ª–µ—Ç—É" —á–µ—Ä–µ–∑ SPA \[cite: models.py\].  
* ApiKey: –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è API-–∫–ª—é—á–∞–º–∏, –∏—Ö –ø—Ä–∞–≤–∞–º–∏ (is\_admin, is\_allowed\_endpoint) –∏ –∞—É–¥–∏—Ç–æ–º (usage\_count) \[cite: models.py\].

### **5.2. API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (api/routes.py)**

* **get\_results\_api** –∏ **get\_abandoned\_sessions**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç **CTE (Common Table Expressions)** –≤ SQL –¥–ª—è "–±–µ—Å—à–æ–≤–Ω–æ–≥–æ" –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ ResultMetadata (–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ) –∏ ProctoringEvent (–∞–∫—Ç–∏–≤–Ω—ã–µ/–±—Ä–æ—à–µ–Ω–Ω—ã–µ) "–Ω–∞ –ª–µ—Ç—É". –í—Å—è —Ä–∞–±–æ—Ç–∞ –ø–æ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î, —á—Ç–æ *–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ* —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ, —á–µ–º –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–≤–∞ —Å–ø–∏—Å–∫–∞ –≤ Python –∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –∏—Ö —Ç–∞–º \[cite: routes.py\].  
* **/analyze\_mouse**: "–¢—è–∂–µ–ª—ã–π" —ç–Ω–¥–ø–æ–∏–Ω—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π Prometheus (ANALYSIS\_DURATION\_SECONDS) –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è \[cite: routes.py, metrics.py\].  
* **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ê–¥–º–∏–Ω-–ü–∞–Ω–µ–ª–∏:**  
  * GET /api/get\_dashboard\_stats: –î–ª—è –≤–∏–¥–∂–µ—Ç–æ–≤.  
  * GET /api/get\_filtered\_stats: –î–ª—è —Å–≤–æ–¥–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.  
  * GET /api/get\_events/{sessionId}: –î–ª—è —Ç–∞–π–º–ª–∞–π–Ω–∞ —Å–æ–±—ã—Ç–∏–π.  
  * GET /api/get\_full\_result/{sessionId}: –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.  
  * GET /api/settings: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫.  
  * POST /api/settings: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–∑–∞—â–∏—â–µ–Ω–æ CSRF).  
  * GET /api/global\_search: –î–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.  
  * GET /api/get\_certificates: –î–ª—è —Ä–µ–µ—Å—Ç—Ä–∞ –∞—Ç—Ç–µ—Å—Ç–∞—Ç–æ–≤.

### **5.3. CLI-–∫–æ–º–∞–Ω–¥—ã (commands.py)**

* flask init-settings: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ SystemSetting –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ) \[cite: commands.py\].  
* flask create-admin: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ \[cite: commands.py\].  
* flask create-apikey / revoke-apikey: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ \[cite: commands.py\].  
* flask collect: **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞** –¥–ª—è Docker-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. –°–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫—É –≤ STATIC\_ROOT (/app/static), –∫–æ—Ç–æ—Ä—ã–π –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ static\_data volume –∏ —Ä–∞–∑–¥–∞–µ—Ç—Å—è *–Ω–∞–ø—Ä—è–º—É—é Nginx*. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —Ç–∞–∫ –∫–∞–∫ Gunicorn/Flask –≤ production *–Ω–µ –¥–æ–ª–∂–µ–Ω* –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Ä–∞–∑–¥–∞—á–µ–π —Å—Ç–∞—Ç–∏–∫–∏ \[cite: commands.py, deploy.sh\].

### **5.4. –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ú–µ—Ç—Ä–∏–∫–∏ (result\_schema.py, metrics.py)**

* **–í–∞–ª–∏–¥–∞—Ü–∏—è:** Pydantic-—Å—Ö–µ–º–∞ SaveResultsRequest ‚Äî —ç—Ç–æ "–∫–æ–Ω—Ç—Ä–∞–∫—Ç" –∏ "–±—Ä–∞–Ω–¥–º–∞—É—ç—Ä" API. –û–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ API –Ω–µ –ø—Ä–∏–º–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π payload, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —á–∏—Å—Ç–æ—Ç—É –¥–∞–Ω–Ω—ã—Ö –≤ raw\_data \[cite: result\_schema.py\].  
* **–ú–µ—Ç—Ä–∏–∫–∏:** \[cite: metrics.py\]  
  * TESTS\_COMPLETED\_TOTAL (Counter): –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∞ (—É—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã).  
  * DOCUMENTS\_GENERATED\_TOTAL (Counter): –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∞ (—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã).  
  * ANALYSIS\_DURATION\_SECONDS (Histogram): –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –º–µ—Ç—Ä–∏–∫–∞ (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å /api/analyze\_mouse).  
  * ACTIVE\_WEBSOCKET\_CONNECTIONS (Gauge): –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –º–µ—Ç—Ä–∏–∫–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–¥–º–∏–Ω–æ–≤ –æ–Ω–ª–∞–π–Ω).

### **5.5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (decorators.py)**

* **@admin\_required (–ì–∏–±—Ä–∏–¥–Ω—ã–π):** –ü–æ–∑–≤–æ–ª—è–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—É –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–º –∫–∞–∫ –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞ (–≤–µ–±-—Å–µ—Å—Å–∏—è current\_user.is\_authenticated), —Ç–∞–∫ –∏ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞ (API-–∫–ª—é—á key\_obj.is\_admin), —á—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ CI/CD \[cite: decorators.py\].  
* **@api\_key\_required (–£–º–Ω—ã–π):** \[cite: decorators.py\]  
  1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis:** –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç (cache.set(..., timeout=300)). –ü–æ–¥–∞–≤–ª—è—é—â–µ–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç ApiKey.query.  
  2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (Scope):** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç is\_allowed\_endpoint. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–ª—é—á–∏ —Å *–≥—Ä–∞–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏* –ø—Ä–∞–≤–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, API\_KEY\_FRONTEND\_CLIENT –º–æ–∂–µ—Ç *—Ç–æ–ª—å–∫–æ* –≤—ã–∑—ã–≤–∞—Ç—å log\_event –∏ save\_results).  
  3. **–ê—É–¥–∏—Ç:** –ê—Ç–æ–º–∞—Ä–Ω–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç usage\_count –¥–ª—è –∫–ª—é—á–∞.  
* **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CSRF:** Flask-WTF (csrf\_token) \-\> results.html (meta- —Ç–µ–≥) \-\> api.js (safeFetch) \-\> X-CSRFToken –∑–∞–≥–æ–ª–æ–≤–æ–∫ \[cite: decorators.py, results.html, api.js\].

### **5.6. –ú–µ—Ö–∞–Ω–∏–∑–º Real-time –û–±–Ω–æ–≤–ª–µ–Ω–∏–π (websocket.py)**

* **–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∫ –í–æ—Ä–∫–µ—Ä –ê, –ø–æ–ª—É—á–∏–≤—à–∏–π /save\_results, —É–≤–µ–¥–æ–º–∏—Ç –∞–¥–º–∏–Ω–∞, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –ø–æ WebSocket –∫ –í–æ—Ä–∫–µ—Ä—É –ë? –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–∑–æ–≤ socketio.emit —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö *–æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞*.  
* **–†–µ—à–µ–Ω–∏–µ (Redis Pub/Sub):** \[cite: websocket.py\]  
  1. api/routes.py –≤—ã–∑—ã–≤–∞–µ—Ç notify\_clients\_of\_update \[cite: routes.py\].  
  2. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è **–ø—É–±–ª–∏–∫—É–µ—Ç** (redis\_client.publish("updates", ...)) JSON-—Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª Redis.  
  3. –í *–∫–∞–∂–¥–æ–º* –≤–æ—Ä–∫–µ—Ä–µ Flask (–∑–∞–ø—É—â–µ–Ω–Ω–æ–º Gunicorn) –≤ —Ñ–æ–Ω–µ –∑–∞–ø—É—â–µ–Ω redis\_subscriber (–∏–∑ \_\_init\_\_.py) \[cite: **init**.py\].  
  4. –≠—Ç–æ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫ **—Å–ª—É—à–∞–µ—Ç** (pubsub.listen()) –∫–∞–Ω–∞–ª "updates".  
  5. –ü–æ–ª—É—á–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–µ (–æ—Ç *–ª—é–±–æ–≥–æ* –≤–æ—Ä–∫–µ—Ä–∞), –æ–Ω —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç –µ–≥–æ *—Å–≤–æ–∏–º* –ª–æ–∫–∞–ª—å–Ω—ã–º WebSocket-–∫–ª–∏–µ–Ω—Ç–∞–º (socketio.emit(...)), –∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—à–∞–µ—Ç api.js –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ \[cite: api.js\].  
* **–í—ã–≤–æ–¥:** –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∏ —Å–∞–º–∞—è –Ω–∞–¥–µ–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è SocketIO –≤ production, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–∫–∞–ø–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É API –æ—Ç –ª–æ–≥–∏–∫–∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –∏ *–Ω–µ —Ç—Ä–µ–±—É–µ—Ç "sticky sessions"* –Ω–∞ Nginx.

### **5.7. –ê–Ω–∞–ª–∏–∑ –ü–æ–≤–µ–¥–µ–Ω–∏—è ("–°–µ–∫—Ä–µ—Ç–Ω—ã–π –°–æ—É—Å")**

* **–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ë—ç–∫–µ–Ω–¥–∞ (analytics.py):**  
  * **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** fastdtw (Fast Dynamic Time Warping).  
  * **–ê–ª–≥–æ—Ä–∏—Ç–º:** compare\_mouse\_trajectories. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ X/Y \[cite: analytics.py\]:  
    1. –ò–∑–æ–ª—è—Ü–∏—è: extract\_initial\_stroke (–æ—Ç—Å–µ–∫–∞–µ—Ç –ø–∞—É–∑—ã).  
    2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: fastDTW (–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ "—Å–æ–≤–º–µ—â–µ–Ω–∏–µ").  
    3. –û—Ü–µ–Ω–∫–∞: –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤–∑–≤–µ—à–µ–Ω–Ω–∞—è "–æ—Ü–µ–Ω–∫–∞ —Å—Ö–æ–∂–µ—Å—Ç–∏": **–§–æ—Ä–º–∞ (60%)**, **–ú–∞—Å—à—Ç–∞–± (25%)**, **–ü–æ–∑–∏—Ü–∏—è (15%)**.  
* **–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ö–ª–∏–µ–Ω—Ç–∞ (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, 117-test.html):**  
  * –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö: "–°–ª–µ–¥—è—â–∏–π –ì–ª–∞–∑" (–ø—Å–∏—Ö–æ–ª–æ–≥–∏—è), "–í—Å–ø—ã—à–∫–∞" (–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥), keyboardDynamics –∏ mouseMovements (–ø–∞—Å—Å–∏–≤–Ω—ã–π —Å–±–æ—Ä) \[cite: 117-test.html\].  
* **–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ö–ª–∏–µ–Ω—Ç–∞ (–ê–¥–º–∏–Ω, analysis.js):**  
  * fastDTW (–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è) –∏ analyzeFingerprints –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Å–Ω–∏–∂–∞—é—â–∏–µ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä \[cite: analysis.js\].

### **5.8. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –ú–æ–¥—É–ª–∏ (Utilities)**

* forms.py: LoginForm –¥–ª—è Flask-WTF (–≤–∞–ª–∏–¥–∞—Ü–∏—è email, –ø–∞—Ä–æ–ª—è) \[cite: forms.py\].  
* validators.py: –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (validate\_session\_id) \[cite: validators.py\].  
* sanitizers.py: sanitize\_filename (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç unidecode –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–º–µ–Ω PDF, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –∞—Ç–∞–∫–∏ Path Traversal \[cite: sanitizers.py\].

## **6\. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –†–µ—à–µ–Ω–∏—è –∏ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏**

### **6.1. –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã (Design Rationale)**

* **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –î–∞–Ω–Ω—ã—Ö:**  
  * **–ê—Ç–æ–º–∞—Ä–Ω—ã–π "UPSERT" (get\_or\_create\_user):** –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π \[cite: routes.py\].  
  * **–ì–∞—Ä–∞–Ω—Ç–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ with\_for\_update() –≤ document.py ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—â–µ–µ '–≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π' –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—â–µ–µ, —á—Ç–æ –¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *–Ω–∏–∫–æ–≥–¥–∞* –Ω–µ –ø–æ–ª—É—á–∞—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –Ω–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ \[cite: document.py\].  
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (Defense in Depth):**  
  * **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è:** Rate Limiting, '—É–º–Ω—ã–µ' API-–∫–ª—é—á–∏ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –≥–∏–±—Ä–∏–¥–Ω—ã–µ –ø—Ä–∞–≤–∞ @admin\_required \[cite: decorators.py\].  
  * **–ö–ª–∏–µ–Ω—Ç (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π "—Ç—É–Ω–Ω–µ–ª—å", –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤/–ø–µ—á–∞—Ç–∏ (\#flash-overlay), –≤–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏ \[cite: 117-test.html, study-117.html\].  
  * **–ö–ª–∏–µ–Ω—Ç (–ê–¥–º–∏–Ω):** –°–∫–≤–æ–∑–Ω–∞—è CSRF-–∑–∞—â–∏—Ç–∞ (Flask meta-tag \-\> api.js X-CSRFToken) \[cite: results.html, api.js\] –∏ XSS-–∑–∞—â–∏—Ç–∞ (escapeHtml –≤ ui.js) \[cite: ui.js\].  
* **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**  
  * **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Redis –¥–ª—è –∫—ç—à–∞ –∏ —Å–µ—Å—Å–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ app —Å–µ—Ä–≤–∏—Å–∞ –∑–∞ load balancer.  
  * **Real-time –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ:** –ü–∞—Ç—Ç–µ—Ä–Ω Redis Pub/Sub (websocket.py) ‚Äî –∫–ª—é—á–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å SocketIO-–≤–æ—Ä–∫–µ—Ä—ã \[cite: websocket.py\].  
* **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å (Observability):**  
  * **Prometheus:** –ö–∞—Å—Ç–æ–º–Ω—ã–µ –±–∏–∑–Ω–µ—Å- (TESTS\_COMPLETED\_TOTAL) –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ (ANALYSIS\_DURATION\_SECONDS) –º–µ—Ç—Ä–∏–∫–∏ \[cite: metrics.py\].  
  * **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ JSON-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å request\_id ‚Äî —ç—Ç–æ *–ø—Ä–∏–∑–Ω–∞–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç (best practice)* –¥–ª—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤ ELK/Splunk –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≤–µ—Å—å –ø—É—Ç—å –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ \[cite: logging.py\].  
* **"–£–º–Ω—ã–π" API –∏ –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è):**  
  * **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ë–î:** –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (get\_results\_api) –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ë–î (—á–µ—Ä–µ–∑ CTE), –∞ –Ω–µ –≤ Python \[cite: routes.py\].  
  * **–ö–æ–Ω—Ç—Ä–∞–∫—Ç API:** –°–±–æ—Ä–∫–∞ payload –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è Pydantic-—Å—Ö–µ–º–µ (result\_schema.py) \[cite: 117-test.html, result\_schema.py\].  
  * **SPA-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ state, api, ui –∏ analysis –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ \[cite: state.js, api.js, ui.js, analysis.js\].  
  * **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏:** –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π fastDTW –∏ analyzeFingerprints –≤ admin/analysis.js ‚Äî —ç—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –ø–µ—Ä–µ–Ω–æ—Å—è—â–µ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ –º–∞—à–∏–Ω—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ \[cite: analysis.js\].

### **6.2. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é**

1. **–†–∏—Å–∫: –†–∞–∑–º–µ—Ä raw\_data**  
   * **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–µ ResultMetadata.raw\_data (—Ç–∏–ø JSONB) —Ö—Ä–∞–Ω–∏—Ç *–≤–µ—Å—å* JSON, –≤–∫–ª—é—á–∞—è behavioralMetrics.mouseMovements. –ü—Ä–∏ —Ç—ã—Å—è—á–∞—Ö –¥–ª–∏–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–º—É —Ä–∞–∑—Ä–∞—Å—Ç–∞–Ω–∏—é –ë–î. –≠—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è, –Ω–æ –∏ –¥—Ä–∞–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–¥–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ pg\_dump (–±—ç–∫–∞–ø—ã), –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é \[cite: models.py, result\_schema.py\].  
   * **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å "—Ö–æ–ª–æ–¥–Ω–æ–µ" —Ö—Ä–∞–Ω–µ–Ω–∏–µ. –í—ã–Ω–µ—Å—Ç–∏ "—Å—ã—Ä—ã–µ" –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–æ—Å–æ–±–µ–Ω–Ω–æ mouseMovements) –≤ S3/MinIO (—Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ) –∏–ª–∏ –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é –ë–î (ClickHouse). –í raw\_data –≤ PostgreSQL –æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.  
2. **–†–∏—Å–∫: –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è JSON**  
   * **–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø—Ä–æ—Å—ã get\_results\_api –∏ get\_filtered\_stats –∞–∫—Ç–∏–≤–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É raw\_data (–Ω–∞–ø—Ä–∏–º–µ—Ä, raw\_data.op('-\>')('sessionMetrics')). –ë–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ Full Table Scan (–ø–æ–ª–Ω–æ–º—É —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é —Ç–∞–±–ª–∏—Ü—ã) \[cite: routes.py\].  
   * **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–ª—è –ø–æ–ª—è raw\_data –≤ PostgreSQL —Å–æ–∑–¥–∞–Ω **GIN-–∏–Ω–¥–µ–∫—Å** (CREATE INDEX idx\_gin\_raw\_data ON result\_metadata USING GIN (raw\_data);). GIN (Generalized Inverted Index) –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤, –≤–∫–ª—é—á–∞—è JSONB, –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —à–∞–≥–æ–º –¥–ª—è production-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.  
3. **–†–∏—Å–∫: –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –§–æ–Ω–∞**  
   * **–ü—Ä–æ–±–ª–µ–º–∞:** –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ redis\_subscriber (–∑–∞–ø—É—Å–∫–∞–µ–º–∞—è –≤ \_\_init\_\_.py) –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π SocketIO. –í —Å–ª—É—á–∞–µ "—Ç–∏—Ö–æ–≥–æ" —Å–±–æ—è —ç—Ç–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –≤ –æ–¥–Ω–æ–º –∏–∑ –≤–æ—Ä–∫–µ—Ä–æ–≤, –∞–¥–º–∏–Ω—ã, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫ –Ω–µ–º—É, –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç –ø–æ–ª—É—á–∞—Ç—å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –ø—Ä–∏ —ç—Ç–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –ø–æ–∫–∞–∂–µ—Ç –Ω–∏–∫–∞–∫–æ–π –æ—à–∏–±–∫–∏ (stale data) \[cite: **init**.py, websocket.py\].  
   * **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–≤–æ–∑–º–æ–∂–Ω–æ, —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—É—é –º–µ—Ç—Ä–∏–∫—É Prometheus, –ø–æ–∫–∞–∑—ã–≤–∞—é—â—É—é "heartbeat" –ø–æ–¥–ø–∏—Å—á–∏–∫–∞) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –≤ production-–æ–∫—Ä—É–∂–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ systemd –∏–ª–∏ supervisor).

## **7\. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (deploy.sh & Makefile)**

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–ª–æ–π DevOps –∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —è–≤–ª—è—é—â–∏–π—Å—è –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–æ–π —á–∞—Å—Ç—å—é —Å–∏—Å—Ç–µ–º—ã \[cite: deploy.sh\].

### **7.1. –§–∏–ª–æ—Å–æ—Ñ–∏—è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (deploy.sh)**

deploy.sh ‚Äî —ç—Ç–æ —Å–∫—Ä–∏–ø—Ç-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä **"–Ω—É–ª–µ–≤–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è"**. –ï–≥–æ –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –Ω–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å Docker –≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á—É—é, –∑–∞—â–∏—â–µ–Ω–Ω—É—é –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É.

* **–î–≤–∞ —Ä–µ–∂–∏–º–∞:**  
  * **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π (--start):** –î–ª—è –ø–µ—Ä–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏. –ü—Ä–æ–≤–æ–¥–∏—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ —à–∞–≥–∞–º: –∑–∞–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã (–¥–æ–º–µ–Ω, –ø–∞—Ä–æ–ª–∏, email) –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ .env.  
  * **–ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π (--non-interactive):** –î–ª—è CI/CD –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏. –ß–∏—Ç–∞–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, F152Z\_DB\_PASSWORD).  
* **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:** –°–∫—Ä–∏–ø—Ç —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º. –û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ Docker/sudo –∏ –º–æ–∂–µ—Ç **—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker** (--install-docker), –∏—Å–ø–æ–ª—å–∑—É—è –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ –û–°.

### **7.2. –ü—Ä–æ—Ü–µ—Å—Å "–£–º–Ω–æ–π" –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (deploy.sh)**

–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è).

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –°–∏—Å—Ç–µ–º—ã:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç sudo, curl, openssl, docker, docker-compose.  
2. **–°–±–æ—Ä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:** –õ–∏–±–æ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ, –ª–∏–±–æ –∏–∑ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.  
3. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è prod.env:** –°–æ–∑–¥–∞–µ—Ç .env —Ñ–∞–π–ª, –≥–µ–Ω–µ—Ä–∏—Ä—É—è SECRET\_KEY —Å –ø–æ–º–æ—â—å—é openssl rand.  
4. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è docker-compose.yml:** –°–æ–∑–¥–∞–µ—Ç docker-compose.yml, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π 4 —Å–µ—Ä–≤–∏—Å–∞: postgres, redis, app (–æ–±—Ä–∞–∑ –∏–∑ ghcr.io), nginx.  
5. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è nginx/nginx.conf:** –°–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –Ω–∞ –æ—Å–Ω–æ–≤–µ SERVER\_NAME.  
6. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è SSL:**  
   * **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç **—Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** (openssl req...), —á—Ç–æ–±—ã Nginx –º–æ–≥ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è.  
   * **–ü—Ä–∏ —Ñ–ª–∞–≥–µ \--use-letsencrypt:**  
     1. –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π Nginx.  
     2. –ó–∞–ø—É—Å–∫–∞–µ—Ç docker run ... certbot/certbot certonly \--webroot... –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è ACME-challenge.  
     3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–∏—Å certbot –≤ docker-compose.yml –¥–ª—è –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.  
     4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç Nginx —Å –±–æ–µ–≤—ã–º Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º.  
7. **–ó–∞–ø—É—Å–∫ –°–µ—Ä–≤–∏—Å–æ–≤:** –í—ã–ø–æ–ª–Ω—è–µ—Ç docker compose up \-d.  
8. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—á–µ—Ä–µ–∑ docker compose exec):**  
   * flask db upgrade: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î.  
   * flask create-admin: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ, —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π .admin\_created).  
   * flask create-apikey: **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç API\_KEY\_FRONTEND\_CLIENT –∏ –¥–æ–ø–∏—Å—ã–≤–∞–µ—Ç –µ–≥–æ –≤ prod.env**. –≠—Ç–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ü–∏–∫–ª: —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ —Å–º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∫–ª—é—á–∞, –∞ –∫–ª—é—á –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±—ç–∫–µ–Ω–¥–∞.  
   * flask collect: –°–±–æ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ static\_data volume –¥–ª—è Nginx.  
9. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è "–ü–∞–Ω–µ–ª–∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è":** –°–æ–∑–¥–∞–µ—Ç Makefile –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ .sh —Å–∫—Ä–∏–ø—Ç—ã.

### **7.3. "–ü–∞–Ω–µ–ª—å –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è" (Makefile)**

Makefile (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π deploy.sh) ‚Äî —ç—Ç–æ **–æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (CLI)** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –û–Ω —Å–ª—É–∂–∏—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–µ–π, —Å–∫—Ä—ã–≤–∞—è —Å–ª–æ–∂–Ω—ã–µ docker compose exec –∏ pg\_dump –∫–æ–º–∞–Ω–¥—ã.

* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏:** make up, make down, make restart, make status.  
* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏:** make backup (–≤—ã–∑–æ–≤ backup.sh), make restore (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ), make migrate.  
* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏:** make create-apikey, make create-admin-apikey (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å –∑–∞–ø–∏—Å—å—é –≤ .env).  
* **–û—Ç–ª–∞–¥–∫–∞:** make logs, make logs-app, make shell (–≤ app), make shell-db (psql), make shell-redis (redis-cli).  
* **–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ:** make update (–≤—ã–∑–æ–≤ update.sh), make monitor (–≤—ã–∑–æ–≤ monitor.sh), make destroy (–ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ volumes).

### **7.4. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –°–∫—Ä–∏–ø—Ç—ã**

* **update.sh:** (–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è) –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: docker compose pull (—Å–∫–∞—á–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã), docker compose up \-d (–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å), flask db upgrade (–ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏).  
* **backup.sh:** (–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è) –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –±—ç–∫–∞–ø–∞: pg\_dump –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (postgres) –∏ tar –≤—Å–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (.env, docker-compose.yml, nginx/).  
* **monitor.sh:** (–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è) –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π TUI-–¥–∞—à–±–æ—Ä–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ docker stats –∏ docker system df –¥–ª—è "–∂–∏–≤–æ–≥–æ" –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU/RAM/–î–∏—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.
